function cloneObject(e){if(null==e||"object"!=(void 0===e?"undefined":_typeof(e)))return e;if(e instanceof Date){var t=new Date(e.getDate());return t}if(e instanceof Array){t=[];for(var o=0,n=e.length;o<n;o++)t[o]=e[o];return t}if(e instanceof Object){for(o in t={},e)e.hasOwnProperty(o)&&(t[o]=cloneObject(e[o]));return t}}function setCookie(e,t,o){var n="";if(o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3),n="; expires="+a.toUTCString()}document.cookie=e+mashiro_option.cookie_version_control+"="+(t||"")+n+"; path=/"}function getCookie(e){for(var t=e+mashiro_option.cookie_version_control+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var a=o[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}function removeCookie(e){document.cookie=e+mashiro_option.cookie_version_control+"=; Max-Age=-99999999;"}function jumpTo(e){return mashiro_global.lib.pjax_to_url(e,"#app")}function injectStyles(e){$("<div />",{html:"&shy;<style>"+e+"</style>"}).appendTo("body")}function scrollBar(){document.body.clientWidth>860&&$(window).scroll(function(){var e=$(window).scrollTop(),t=$(document).height(),o=$(window).height(),n=parseInt(e/(t-o)*100);$("#bar").css("width",n+"%"),$("#bar").css("background","orange"),$(".toc-container").css("height",$(".site-content").outerHeight()),$(".skin-menu").removeClass("show")})}function checkBgImgCookie(){var e=getCookie("bgImgSetting");e?($("#banner_wave_1").addClass("banner_wave_hide_fit_skin"),$("#banner_wave_2").addClass("banner_wave_hide_fit_skin")):($("#banner_wave_1").removeClass("banner_wave_hide_fit_skin"),$("#banner_wave_2").removeClass("banner_wave_hide_fit_skin"));var t=mashiro_option.changeBG.sakura_bg,o=mashiro_option.changeBG.gribs_bg,n=mashiro_option.changeBG.pixiv_bg,a=mashiro_option.changeBG.KAdots_bg,i=mashiro_option.changeBG.totem_bg,s=mashiro_option.changeBG.bing_bg;if(""==e)return!1;e==t||e==o||e==n||e==a||e==i?(mashiro_global.variables.skinSecter=!0,mashiro_global.variables.isNight=!1,$("#night-mode-cover").css("visibility","hidden"),$("body").css("background-image","url("+e+")"),$(".site-header").css("background-color","rgba(255,255,255,1)"),$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura"),$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura"),$("#colophon.site-footer").css("background","none")):e==s&&(mashiro_global.variables.skinSecter=!0,mashiro_global.variables.isNight=!0,$("#night-mode-cover").css("visibility","hidden"),$("body").css("background-image","url("+e+")"),$(".site-header").css("background-color","rgba(255,255,255,1)"),$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura"),$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura"),$("#colophon.site-footer").css("background","none"))}function no_right_click(){$(".post-thumb img").bind("contextmenu",function(e){return!1})}function pjaxdone(){var e=Math.floor(Math.random()*bg.length);$(".centerbg").css("background-image",'url("'+bg[e]+'")')}function submenu(){$(".submenu").click(function(){$(this).toggleClass("submenu-open-icon"),$(this).children(".sub-menu").toggle(300)})}function timelink(){$(".main .year .list").each(function(e,t){var o=$(t),n=o.find("ul");o.height(n.outerHeight()),n.css("position","absolute")}),$(".main .year>h2>a").click(function(e){e.preventDefault(),$(this).parents(".year").toggleClass("close")})}function copy_code_block(){$("pre").addClass("line-numbers highlight-wrap"),$("pre").on("click",function(e){e.target===this&&($(this).toggleClass("code-block-fullscreen"),$("html").toggleClass("code-block-fullscreen-html-scroll"))}),$("pre code").each(function(e,t){$(t).attr({id:"language-"+e}),$(this).after('<a class="copy-code" href="javascript:" data-clipboard-target="#language-'+e+'" title="拷贝代码"><i class="fa fa-clipboard" aria-hidden="true"></i></a>')});new ClipboardJS(".copy-code")}function reload_show_date_time(){BirthDay=new Date("06/02/2017 18:00:00"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),monitorday.innerHTML=daysold}function timeSeriesReload(e){1==e?($("#archives-temp h3.ar-mon").click(function(){return $(this).next().slideToggle(400),!1}),lazyload()):($("#archives-temp h3.ar-mon").css({cursor:"s-resize"}),$("#archives-temp h3.ar-mon").each(function(){var e=$(this).next().children(".brick").length;$(this).children("#post-num").text(e)}))}function add_copyright(){function e(e){e.preventDefault();var t=""+window.getSelection().toString().replace(/\r\n/g,"\n"),o=""+window.getSelection().toString().replace(/\r\n/g,"\n");if(e.clipboardData)e.clipboardData.setData("text/html",t),e.clipboardData.setData("text/plain",o),addComment.createButterbar("复制成功！<br>Copied to clipboard successfully!",1e3);else if(window.clipboardData)return window.clipboardData.setData("text",o)}document.body.addEventListener("copy",function(t){!mashiro_global.is_user_logged_in&&window.getSelection().toString().length>30&&e(t)})}function get_poem(e,t){var o=document.querySelector(e),n=document.querySelector(t),a=new XMLHttpRequest;a.open("get","https://v2.jinrishici.com/one.json"),a.withCredentials=!0,a.onreadystatechange=function(){if(4===a.readyState){var e=JSON.parse(a.responseText);o.innerHTML=e.data.content,n.innerHTML="【"+e.data.origin.dynasty+"】"+e.data.origin.author+"《"+e.data.origin.title+"》"}},a.send()}function hearthstone_deck_iframe(){$("iframe").hasClass("hearthstone-deck")&&($(".hearthstone-deck").each(function(){$(this).attr("height",5*$(this).width()/9+"px")}),$(".hearthstone-deck-container").each(function(){var e=5*$(this).width()/9+14;$(this).css("height",e+"px")}))}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};mashiro_global.variables=new function(){this.isNight=!1,this.skinSecter=!1},mashiro_global.ini=new function(){this.normalize=function(){lazyload(),copy_code_block(),social_share(),mashiro_global.post_list_show_animation.ini(),$("div").hasClass("poem-wrap")&&get_poem(".poem",".info"),$(function(){-1!=navigator.userAgent.indexOf("AppleWebKit")&&$("body").addClass("isWebKit"),hearthstone_deck_iframe()})},this.pjax=function(){pjaxInit(),copy_code_block(),social_share(),mashiro_global.post_list_show_animation.ini(),$("div").hasClass("poem-wrap")&&get_poem(".poem",".info"),hearthstone_deck_iframe()}},mashiro_global.lib=new function(){this.removeClass=function(e,t){var o=document.getElementById(e);o.classList?o.classList.remove(t):o.className=o.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},this.addClass=function(e,t){var o=document.getElementById(e);o.classList?o.classList.add(t):o.className+=" "+t},this.hasClass=function(e,t){var o=document.getElementById(e);if(o.classList)var n=o.classList.contains(t);else n=new RegExp("(^| )"+t+"( |$)","gi").test(o.className);return n},this.toggleClass=function(e,t){var o=document.getElementById(e);if(o.classList)o.classList.toggle(t);else{var n=o.className.split(" "),a=n.indexOf(t);a>=0?n.splice(a,1):n.push(t),o.className=n.join(" ")}},this.saveFile=function(e,t){var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){var e=document.createElement("a");e.href=window.URL.createObjectURL(o.response),e.download=t,e.style.display="none",document.body.appendChild(e),e.click()},o.open("GET",e),o.send()}},mashiro_global.post_list_show_animation=new function(){this.ini=function(e){$("article.post-list-thumb").each(function(t){if(e)var o=$(window).height();else if($(".headertop").hasClass("headertop-bar"))o=0;else o=$(window).height()-300;mashiro_global.landing_at_home||(o+=300);var n=$("article.post-list-thumb").eq(t).offset().top;$(window).height()+$(window).scrollTop()>=n&&$("article.post-list-thumb").eq(t).addClass("post-list-show"),$(window).scroll(function(){var e=$(window).scrollTop();e+o>=n&&e&&$("article.post-list-thumb").eq(t).addClass("post-list-show")})})}},scrollBar(),document.body.clientWidth>860&&checkBgImgCookie(),mashiro_global.variables.isNight?$(".changeSkin-gear, .toc").css("background","rgba(255,255,255,0.8)"):$(".changeSkin-gear, .toc").css("background","none"),$(document).ready(function(){function e(e,t){$(".skin-menu "+e).click(function(){mashiro_global.variables.skinSecter=!0,mashiro_global.variables.isNight=!1,$("#night-mode-cover").css("visibility","hidden"),$("body").css("background-image","url("+t+")"),$(".site-header").css("background-color","rgba(255,255,255,1)"),$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura"),$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura"),$("#colophon.site-footer").css("background","none"),$("#banner_wave_1").addClass("banner_wave_hide_fit_skin"),$("#banner_wave_2").addClass("banner_wave_hide_fit_skin"),o(),setCookie("bgImgSetting",t,30)})}function t(e,t){$(".skin-menu "+e).click(function(){mashiro_global.variables.skinSecter=!0,mashiro_global.variables.isNight=!0,$("#night-mode-cover").css("visibility","hidden"),$("body").css("background-image","url("+t+")"),$(".site-header").css("background-color","rgba(255,255,255,1)"),$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura"),$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura"),$("#colophon.site-footer").css("background","none"),$("#banner_wave_1").addClass("banner_wave_hide_fit_skin"),$("#banner_wave_2").addClass("banner_wave_hide_fit_skin"),o(),setCookie("bgImgSetting",t,30)})}function o(){$(".skin-menu").removeClass("show"),setTimeout(function(){$(".changeSkin-gear").css("visibility","visible")},300),mashiro_global.variables.isNight?$(".changeSkin-gear, .toc").css("background","rgba(255,255,255,0.8)"):$(".changeSkin-gear, .toc").css("background","none")}var n=mashiro_option.changeBG.sakura_bg,a=mashiro_option.changeBG.gribs_bg,i=mashiro_option.changeBG.pixiv_bg,s=mashiro_option.changeBG.KAdots_bg,r=mashiro_option.changeBG.totem_bg,c=mashiro_option.changeBG.bing_bg;e("#sakura-bg",n),e("#gribs-bg",a),e("#pixiv-bg",i),e("#KAdots-bg",s),e("#totem-bg",r),t("#bing-bg",c),$(".skin-menu #white-bg").click(function(){mashiro_global.variables.skinSecter=!1,mashiro_global.variables.isNight=!1,$("#night-mode-cover").css("visibility","hidden"),$("body").css("background-image","none"),$(".site-header").css("background-color","rgba(255,255,255,.0)"),$(".pattern-center-sakura").removeClass("pattern-center-sakura").addClass("pattern-center"),$(".headertop-bar-sakura").removeClass("headertop-bar-sakura").addClass("headertop-bar"),$(".banner_waves").css("display","block"),$("#banner_wave_1").removeClass("banner_wave_hide_fit_skin"),$("#banner_wave_2").removeClass("banner_wave_hide_fit_skin"),o(),setCookie("bgImgSetting","",30)}),$(".skin-menu #dark-bg").click(function(){mashiro_global.variables.skinSecter=!0,mashiro_global.variables.isNight=!0;var e=mashiro_option.changeBG.dark_bg;$("body").css("background-image","url("+e+")"),$(".site-header").css("background-color","rgba(255,255,255,.8)"),$("#night-mode-cover").css("visibility","visible"),$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura"),$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura"),$("#colophon.site-footer").css("background","none"),$("#banner_wave_1").addClass("banner_wave_hide_fit_skin"),$("#banner_wave_2").addClass("banner_wave_hide_fit_skin"),o()}),$(".changeSkin-gear").click(function(){$(".skin-menu").toggleClass("show"),mashiro_global.variables.isNight?$(".changeSkin").css("background","rgba(255,255,255,0.8)"):$(".changeSkin").css("background","none")}),$(".skin-menu #close-skinMenu").click(function(){o()})});var pjaxInit=function(){pjaxdone(),timelink(),lazyload(),add_copyright(),!0===mashiro_global.variables.skinSecter&&($(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura"),$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura"),$(".banner_waves").css("display","none"),$("#colophon.site-footer::before").css("display","none"),mashiro_global.variables.isNight&&($(".black").css("background-color","rgba(255,255,255,1)"),$(".toc").css("background-color","rgba(255,255,255,0.8)"))),$(".iconflat").css("width","50px").css("height","50px"),$(".openNav").css("height","50px"),timeSeriesReload()};if($(document).ready(function(){pjaxdone(),timelink(),submenu()}),document.body.clientWidth<=860&&!window.is_app){function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("moblieGoTop").style.display="block":document.getElementById("moblieGoTop").style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}window.onscroll=function(){scrollFunction()}}timeSeriesReload(),add_copyright(),mashiro_global.ini.normalize();var home=location.href,s=$("#bgvideo")[0],Siren={TOC:function(){if($(".toc").length>0&&document.body.clientWidth>1200){$(".pattern-center").length>0?tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:!0,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-400,scrollSmoothOffset:-85}):tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:!0,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-85,scrollSmoothOffset:-85});var e=$(".toc").offset().top-135;window.onscroll=function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;t>=e?$(".toc").addClass("toc-fixed"):$(".toc").removeClass("toc-fixed")}}},VA:function(){if(!mashiro_option.valine){var e=new Valine;e.init({el:"#vcomments",appId:mashiro_option.v_appId,appKey:mashiro_option.v_appKey,path:window.location.pathname,placeholder:"你是我一生只会遇见一次的惊喜 ..."})}},MJ:function(){"1"==mashiro_option.mathjax&&$.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML",function(){MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}});var e=document.getElementsByClassName("entry-content")[0];MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])})},MN:function(){$(".iconflat").on("click",function(){$("#main-container").hasClass("open")?($(".iconflat").css("width","50px").css("height","50px"),$(".openNav").css("height","50px")):($(".iconflat").css("width","100%").css("height","100%"),$(".openNav").css("height","100%")),$("body").toggleClass("navOpen"),$("#main-container,#mo-nav,.openNav").toggleClass("open")})},MNH:function(){$("body").hasClass("navOpen")&&($("body").toggleClass("navOpen"),$("#main-container,#mo-nav,.openNav").toggleClass("open"))},splay:function(){$("#video-btn").addClass("video-pause").removeClass("video-play").show(),$(".video-stu").css({bottom:"-100px"}),$(".focusinfo").css({top:"-999px"}),$("#meteor").css({display:"none"}),$("#banner_waves").addClass("banner_wave_hide"),s.play()},spause:function(){$("#video-btn").addClass("video-play").removeClass("video-pause"),$(".focusinfo").css({top:"49.3%"}),$("#meteor").css({display:"none"}),$("#banner_waves").addClass("banner_wave_hide"),s.pause()},liveplay:function(){null!=s.oncanplay&&$(".haslive").length>0&&$(".videolive").length>0&&Siren.splay()},livepause:function(){null!=s.oncanplay&&$(".haslive").length>0&&(Siren.spause(),$(".video-stu").css({bottom:"0px"}).html("已暂停 ..."))},addsource:function(){$(".video-stu").html("正在载入视频 ...").css({bottom:"0px"});var e=Poi.movies.name.split(","),t=e[Math.floor(Math.random()*e.length)];$("#bgvideo").attr("src",Poi.movies.url+"/"+t),$("#bgvideo").attr("video-name",t)},LV:function(){var e=$("#video-btn");e.on("click",function(){$(this).hasClass("loadvideo")?($(this).addClass("video-pause").removeClass("loadvideo").hide(),Siren.addsource(),s.oncanplay=function(){Siren.splay(),$("#video-add").show(),e.addClass("videolive"),e.addClass("haslive")}):$(this).hasClass("video-pause")?(Siren.spause(),e.removeClass("videolive"),$(".video-stu").css({bottom:"0px"}).html("已暂停 ...")):(Siren.splay(),e.addClass("videolive")),s.onended=function(){$("#bgvideo").attr("src",""),$("#video-add").hide(),e.addClass("loadvideo").removeClass("video-pause"),e.removeClass("videolive"),e.removeClass("haslive"),$(".focusinfo").css({top:"49.3%"})}}),$("#video-add").on("click",function(){Siren.addsource()})},CE:function(){$(".comments-hidden").show(),$(".comments-main").hide(),$(".comments-hidden").click(function(){$(".comments-main").slideDown(500),$(".comments-hidden").hide()}),$(".archives").hide(),$(".archives:first").show(),$("#archives-temp h3").click(function(){return $(this).next().slideToggle("fast"),!1}),$(".js-toggle-search").on("click",function(){$(".js-toggle-search").toggleClass("is-active"),$(".js-search").toggleClass("is-visible")}),$(".search_close").on("click",function(){$(".js-search").hasClass("is-visible")&&($(".js-toggle-search").toggleClass("is-active"),$(".js-search").toggleClass("is-visible"))}),$("#show-nav").on("click",function(){$("#show-nav").hasClass("showNav")?($("#show-nav").removeClass("showNav").addClass("hideNav"),$(".site-top .lower nav").addClass("navbar")):($("#show-nav").removeClass("hideNav").addClass("showNav"),$(".site-top .lower nav").removeClass("navbar"))}),$("#loading").click(function(){$("#loading").fadeOut(500)})},NH:function(){var e=0,t=50,o=$(document).scrollTop();$(window).scroll(function(){var n=$(document).scrollTop();n==e&&$(".site-header").removeClass("yya"),n>e&&$(".site-header").addClass("yya"),n>t&&($(".site-header").addClass("gizle"),n>o?$(".site-header").removeClass("sabit"):$(".site-header").addClass("sabit"),o=n)})},XLS:function(){$body=window.opera?"CSS1Compat"==document.compatMode?$("html"):$("body"):$("html,body"),$("body").on("click","#pagination a",function(){return $(this).addClass("loading").text(""),$.ajax({type:"GET",url:$(this).attr("href")+"#main",success:function(e){result=$(e).find("#main .post"),nextHref=$(e).find("#pagination a").attr("href"),$("#main").append(result.fadeIn(500)),$("#pagination a").removeClass("loading").text("Previous"),lazyload(),mashiro_global.post_list_show_animation.ini(50),null!=nextHref?$("#pagination a").attr("href",nextHref):$("#pagination").html("<span>很高兴你翻到这里，但是真的没有了...</span>")}}),!1})},XCS:function(){var e=jQuery("#cancel-comment-reply-link"),t=e.text(),o="commentwrap";jQuery(document).on("submit","#commentform",function(){return jQuery.ajax({url:Poi.ajaxurl,data:jQuery(this).serialize()+"&action=ajax_comment",type:jQuery(this).attr("method"),beforeSend:addComment.createButterbar("提交中(Commiting)...."),error:function(e){var t=addComment;t.createButterbar(e.responseText)},success:function(e){jQuery("textarea").each(function(){this.value=""});var t=addComment,n=t.I("cancel-comment-reply-link"),a=t.I("wp-temp-form-div"),i=t.I(t.respondId),s=(t.I("comment_post_ID").value,t.I("comment_parent").value);"0"!=s?jQuery("#respond").before('<ol class="children">'+e+"</ol>"):jQuery("."+o).length?"asc"==Poi.order?jQuery("."+o).append(e):jQuery("."+o).prepend(e):"bottom"==Poi.formpostion?jQuery("#respond").before('<ol class="'+o+'">'+e+"</ol>"):jQuery("#respond").after('<ol class="'+o+'">'+e+"</ol>"),t.createButterbar("提交成功(Succeed)"),lazyload(),n.style.display="none",n.onclick=null,t.I("comment_parent").value="0",a&&i&&(a.parentNode.insertBefore(i,a),a.parentNode.removeChild(a))}}),!1}),addComment={moveForm:function(o,n,a){var i,s=this,r=s.I(o),c=s.I(a),l=s.I("cancel-comment-reply-link"),d=s.I("comment_parent");s.I("comment_post_ID");e.text(t),s.respondId=a,s.I("wp-temp-form-div")||(i=document.createElement("div"),i.id="wp-temp-form-div",i.style.display="none",c.parentNode.insertBefore(i,c)),r?r.parentNode.insertBefore(c,r.nextSibling):(temp=s.I("wp-temp-form-div"),s.I("comment_parent").value="0",temp.parentNode.insertBefore(c,temp),temp.parentNode.removeChild(temp)),jQuery("body").animate({scrollTop:jQuery("#respond").offset().top-180},400),d.value=n,l.style.display="",l.onclick=function(){var e=addComment,t=e.I("wp-temp-form-div"),o=e.I(e.respondId);return e.I("comment_parent").value="0",t&&o&&(t.parentNode.insertBefore(o,t),t.parentNode.removeChild(t)),this.style.display="none",this.onclick=null,!1};try{s.I("comment").focus()}catch(e){}return!1},I:function(e){return document.getElementById(e)},clearButterbar:function(e){jQuery(".butterBar").length>0&&jQuery(".butterBar").remove()},createButterbar:function(e,t){var o=this;o.clearButterbar(),jQuery("body").append('<div class="butterBar butterBar--center"><p class="butterBar-message">'+e+"</p></div>"),t>0?setTimeout("jQuery('.butterBar').remove()",t):setTimeout("jQuery('.butterBar').remove()",6e3)}}},LA:function(){if(mashiro_option.leancloud){function e(e){var t=new AV.Query(e),o=[],n=$(".leancloud_visitors");n.each(function(){o.push($(this).attr("id").trim())}),t.containedIn("url",o),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var a=0;a<e.length;a++){var i=e[a],s=i.get("url"),r=i.get("time"),c=document.getElementById(s);$(c).find(t).text(r)}for(a=0;a<o.length;a++){s=o[a],c=document.getElementById(s);var l=$(c).find(t);""==l.text()&&l.text(0)}}else n.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function t(e){var t=$(".leancloud_visitors"),o=t.attr("id").trim(),n=t.attr("data-flag-title").trim(),a=new AV.Query(e);a.equalTo("url",o),a.find({success:function(t){if(t.length>0){var a=t[0];a.fetchWhenSave(!0),a.increment("time"),a.save(null,{success:function(e){var t=$(document.getElementById(o));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var i=new e,s=new AV.ACL;s.setPublicReadAccess(!0),s.setPublicWriteAccess(!0),i.setACL(s),i.set("title",n),i.set("url",o),i.set("time",1),i.save(null,{success:function(e){var t=$(document.getElementById(o));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var o=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?t(o):$(".post-title").length>1&&e(o)})}},PSM:function(){$.getScript("/js/prism.js"),$.getScript("https://sdk.jinrishici.com/v2/browser/jinrishici.js")},GT:function(){var e=100,t=1200,o=700,n=$(".cd-top");$(window).scroll(function(){$(this).scrollTop()>e?(n.addClass("cd-is-visible"),$(".changeSkin-gear").css("bottom","0"),$(window).height()>950?$(".cd-top.cd-is-visible").css("top","0"):$(".cd-top.cd-is-visible").css("top",$(window).height()-950+"px")):($(".changeSkin-gear").css("bottom","-999px"),$(".cd-top.cd-is-visible").css("top","-900px"),n.removeClass("cd-is-visible cd-fade-out")),$(this).scrollTop()>t&&n.addClass("cd-fade-out")}),n.on("click",function(e){e.preventDefault(),$("body,html").animate({scrollTop:0},o)})}};$(function(){Siren.NH(),Siren.GT(),Siren.XLS(),Siren.XCS(),Siren.CE(),Siren.MN(),Siren.LV(),Siren.TOC(),Siren.PSM(),Siren.LA(),window.is_app&&injectStyles("#nprogress .bar { display: none; }"),"1"==Poi.pjax&&($(document).pjax("a[target!=_top]","#app",{fragment:"#app",timeout:8e3}).on("pjax:send",function(){document.body.clientWidth>=860&&!window.is_app&&mashiro_option.Loading&&$("#loading").fadeIn(300),$("#bar").css("width","0%"),"true"==mashiro_option.NProgressON&&NProgress.start(),Siren.MNH()}).on("pjax:complete",function(){Siren.CE(),Siren.VA(),Siren.MJ(),Siren.PSM(),Siren.TOC(),Siren.LA(),mashiro_option.NProgressON&&NProgress.done(),mashiro_global.ini.pjax(),$("#loading").fadeOut(500)}).on("submit",".search-form,.s-search",function(e){e.preventDefault(),$.pjax.submit(e,"#app",{fragment:"#app",timeout:8e3}),$(".js-search.is-visible").length>0&&($(".js-toggle-search").toggleClass("is-active"),$(".js-search").toggleClass("is-visible"))}),mashiro_global.lib.pjax_to_url=function(e,t){$.pjax({url:e,container:t,fragment:t,timeout:8e3})},window.addEventListener("popstate",function(e){Siren.CE(),timeSeriesReload(!0)},!1))});var isWebkit=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,isOpera=navigator.userAgent.toLowerCase().indexOf("opera")>-1,isIe=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(isWebkit||isOpera||isIe)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t),e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus()))},!1);